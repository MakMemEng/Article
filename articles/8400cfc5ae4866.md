---
title: "RAGの活用事例"
emoji: "😽"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Azure", "OpenAI", "ChatGPT", "LangChain", "RAG"]
published: true
published_at: 2024-05-31 21:43
---
# 1. 指摘事項を用いた改善フィードバック機構

![](/images/8400cfc5ae4866/image.png)

1. 以下の3つを事前にVectorStore化

- FAQ.CSV
- 応答履歴.CSV
- 取扱説明書.PDF

2. 質問を受け取り、応答履歴から類似質問を検索

3. 類似質問に対して、文書から過去の回答を参照し回答生成

4. 生成した結果に対して内容が正しいか**ユーザ**が判断し、指摘事項があればVectorStoreを作成

5. 指摘内容を加味した応答履歴を参照できるようになる。

(今後の展望) ユーザがチェックするのではなく、正誤チェックもLLMが行うように学習することで、工数削減&ナレッジ蓄積を実現

# 2. 最新情報を自律的に更新し回答生成

**在庫情報**、**○年前** など回答のタイミングによって出力内容が異なる場合

![](/images/8400cfc5ae4866/image(1).png)

1. 質問を受け取り、文書から過去の類似質問、回答を参照し回答生成

2. 生成した回答内容をLLMが確認し情報を更新すべき場合に外部APIを呼び出し、実行

3. 基幹システムと連携したAPIから更新された情報を受け取り、生成回答に反映させる

4. 質問/回答時の時系列に沿った最終的な回答内容を出力する

### ReActを用いたタスク推論、自律実行

1. 応答履歴から生成回答(過去情報)

```
2002年11月に廃止された商品で、現在は20年前の商品となります。
```

2. 生成した回答に更新すべきデータがないか、LLMが判断&実行

![](/images/8400cfc5ae4866/image(2).png)

3. 関数を実行し、現在の情報を取得

![](/images/8400cfc5ae4866/image(3).png)

> 2002年, 20年前(更新前) 2002年, 22年前(更新後)
>
4. 更新された情報をもとに最終的な回答を出力

# 3. metadataによるVectorStore検索

![](/images/8400cfc5ae4866/image(4).png)

1. RAGで検索をかける前に、対象のキーワードをmetadata内でフィルタリング

2. フィルタの作成
    > query「製品Aの後継機種を教えてください。」 filter: 製品A
    >
3. metadataで絞り込みしたVectorStoreとPromptを用いて回答生成

4. ユーザの質問に類似する文書をより正確に取得できる
